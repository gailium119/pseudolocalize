#include <string>
namespace pseudo_utf8
{
	std::wstring a[16] = { L"ª", L"à", L"á", L"â", L"ã", L"ä", L"å", L"ă", L"ā", L"ą", L"ǻ", L"ά", L"α", L"а", L"д", L"∆" };
	std::wstring b[3] = { L"в", L"ъ", L"ь" };
	std::wstring c[8] = { L"¢", L"ç", L"ć", L"ĉ", L"ċ", L"č", L"ς", L"с" };
	std::wstring d[4] = { L"ð", L"δ", L"đ", L"ď" };
	std::wstring e[17] = { L"è", L"é", L"ê", L"ë", L"έ", L"ε", L"е", L"з", L"э", L"ё", L"є", L"℮", L"ĕ", L"ē", L"ė", L"ę", L"ě" };
	std::wstring f[1] = { L"ƒ" };
	std::wstring g[4] = { L"ğ", L"ĝ", L"ġ", L"ģ" };
	std::wstring h[5] = { L"н", L"ђ", L"ћ", L"ħ", L"ĥ" };
	std::wstring i[14] = { L"ì", L"í", L"î", L"ï", L"ΐ", L"ί", L"ι", L"ϊ", L"і", L"ї", L"ī", L"ĩ", L"ĭ", L"į" };
	std::wstring j[2] = { L"ј", L"ĵ" };
	std::wstring k[5] = { L"κ", L"к", L"ќ", L"ķ", L"ĸ" };
	std::wstring l[6] = { L"ℓ", L"ļ", L"ĺ", L"ľ", L"ŀ", L"ł" };
	std::wstring m[3] = { L"м", L"ɱ", L"ḿ" };
	std::wstring n[14] = { L"ñ", L"ή", L"η", L"π", L"и", L"й", L"л", L"п", L"ⁿ", L"ņ", L"ň", L"ŉ", L"ŋ", L"ń" };
	std::wstring o[17] = { L"ò", L"ó", L"ô", L"õ", L"ö", L"ø", L"ǿ", L"Φ", L"θ", L"ο", L"σ", L"ό", L"б", L"о", L"ō", L"ŏ", L"ő" };
	std::wstring p[3] = { L"ρ", L"φ", L"р" };
	std::wstring q[1] = { L"q" };
	std::wstring r[7] = { L"г", L"я", L"ѓ", L"ґ", L"ř", L"ŕ", L"ŗ" };
	std::wstring s[5] = { L"ѕ", L"š", L"ś", L"ş", L"ŝ" };
	std::wstring t[5] = { L"τ", L"т", L"ŧ", L"ţ", L"ť" };
	std::wstring u[18] = { L"µ", L"ù", L"ú", L"û", L"ü", L"ΰ", L"μ", L"υ", L"ϋ", L"ύ", L"ц", L"џ", L"ų", L"ũ", L"ű", L"ů", L"ŭ", L"ū" };
	std::wstring v[2] = { L"ν", L"ʋ" };
	std::wstring w[8] = { L"ω", L"ώ", L"ш", L"щ", L"ẅ", L"ẁ", L"ẃ", L"ŵ" };
	std::wstring x[3] = { L"×", L"ж", L"х" };
	std::wstring y[7] = { L"ý", L"ÿ", L"γ", L"у", L"ў", L"ỳ", L"ŷ" };
	std::wstring z[3] = { L"ž", L"ź", L"ż" };
	std::wstring A[16] = { L"À", L"Á", L"Â", L"Ã", L"Ä", L"Å", L"Ā", L"Ă", L"Ą", L"Ǻ", L"Ά", L"Α", L"Δ", L"Λ", L"А", L"Д" };
	std::wstring B[7] = { L"ß", L"Β", L"β", L"Б", L"В", L"Ъ", L"Ь" };
	std::wstring C[7] = { L"Ç", L"Ć", L"Ĉ", L"Ċ", L"Č", L"С", L"€" };
	std::wstring D[3] = { L"Ð", L"Ď", L"Đ" };
	std::wstring E[18] = { L"È", L"É", L"Ê", L"Ë", L"Έ", L"Ε", L"Σ", L"Ё", L"Є", L"Е", L"З", L"Э", L"∑", L"Ē", L"Ė", L"Ę", L"Ě", L"Ĕ" };
	std::wstring F[1] = { L"₣" };
	std::wstring G[4] = { L"Ĝ", L"Ġ", L"Ģ", L"Ğ" };
	std::wstring H[5] = { L"Ή", L"Η", L"Н", L"Ĥ", L"Ħ" };
	std::wstring I[12] = { L"Ì", L"Í", L"Î", L"Ί", L"Ϊ", L"І", L"Ї", L"Ĩ", L"Ī", L"Ĭ", L"Į", L"İ" };
	std::wstring J[2] = { L"Ј", L"Ĵ" };
	std::wstring K[4] = { L"Κ", L"Ќ", L"К", L"Ķ" };
	std::wstring L[7] = { L"£", L"₤", L"Ĺ", L"Ļ", L"Ľ", L"Ŀ", L"Ł" };
	std::wstring M[2] = { L"Μ", L"М" };
	std::wstring N[11] = { L"Ñ", L"Ν", L"И", L"Й", L"Л", L"П", L"∏", L"Ń", L"Ň", L"Ņ", L"Ŋ" };
	std::wstring O[18] = { L"Ò", L"Ó", L"Ô", L"Õ", L"Ö", L"Ø", L"Ǿ", L"Ό", L"Ώ", L"Θ", L"Ο", L"Ω", L"О", L"Ф", L"Ω", L"Ō", L"Ŏ", L"Ő" };
	std::wstring P[3] = { L"Þ", L"Ρ", L"Р" };
	std::wstring Q[1] = { L"Q" };
	std::wstring R[8] = { L"Γ", L"Ѓ", L"Г", L"Я", L"Ґ", L"Ŕ", L"Ŗ", L"Ř" };
	std::wstring S[5] = { L"Ѕ", L"Ś", L"Ŝ", L"Ş", L"Š" };
	std::wstring T[5] = { L"Τ", L"Т", L"Ţ", L"Ť", L"Ŧ" };
	std::wstring U[12] = { L"Ù", L"Ú", L"Û", L"Ü", L"Џ", L"Ц", L"Ũ", L"Ū", L"Ŭ", L"Ů", L"Ű", L"Ų" };
	std::wstring V[1] = { L"V" };
	std::wstring W[5] = { L"Ш", L"Ẁ", L"Ẃ", L"Ẅ", L"Ŵ" };
	std::wstring X[4] = { L"Χ", L"χ", L"Ж", L"Х" };
	std::wstring Y[8] = { L"¥", L"Ý", L"Ύ", L"Υ", L"Ϋ", L"Ў", L"Ỳ", L"Ŷ" };                                    
    std::wstring Z[4] = { L"Ζ", L"Ź", L"Ż", L"Ž" };
	std::wstring charset = L"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

}
#define random(x)(rand()%x)

using namespace pseudo_utf8;
std::wstring Pseudo_localize_utf8(std::wstring str, bool genid = true, bool wraparound = true, bool extend = true) {
    std::wstring after;
    wchar_t buffer[5] = L"";
    for (int cnt = 0; cnt <= 4; cnt++) {

        buffer[cnt] = charset[random(62)];
    }
    if (str.length() > 10 && str[0] == '<' && str[1] == '?' && str[2] == 'x' && str[3] == 'm' && str[4] == 'l') {
        // an xml file
        return str;
    }
    std::wstring buf = std::wstring(buffer, 5);
    int len = str.length();
    bool nolower = true;
    for (int cnt = 0; cnt < len; cnt++) {
        std::wstring out;
        switch (str[cnt]) {
        case 'a': out = a[random(16)]; nolower = false; break;
        case 'b': out = b[random(3)];  nolower = false; break;
        case 'c': out = c[random(8)]; nolower = false; break;
        case 'd': out = d[random(4)];  nolower = false; break;
        case 'e': out = e[random(17)]; nolower = false; break;
        case 'f': out = f[random(1)]; nolower = false; break;
        case 'g': out = g[random(4)]; nolower = false; break;
        case 'h': out = h[random(5)]; nolower = false; break;
        case 'i': out = i[random(14)]; nolower = false; break;
        case 'j': out = j[random(2)];  nolower = false; break;
        case 'k': out = k[random(5)]; nolower = false; break;
        case 'l': out = l[random(6)]; nolower = false; break;
        case 'm': out = m[random(3)];  nolower = false; break;
        case 'n': out = n[random(14)]; nolower = false; break;
        case 'o': out = o[random(17)]; nolower = false; break;
        case 'p': out = p[random(3)]; nolower = false; break;
        case 'q': out = q[random(1)]; nolower = false; break;
        case 'r': out = r[random(7)]; nolower = false; break;
        case 's': out = s[random(5)]; nolower = false; break;
        case 't': out = t[random(5)]; nolower = false; break;
        case 'u': out = u[random(18)]; nolower = false; break;
        case 'v': out = v[random(2)]; nolower = false; break;
        case 'w': out = w[random(8)]; nolower = false; break;
        case 'x': out = x[random(3)]; nolower = false; break;
        case 'y': out = y[random(7)];  nolower = false; break;
        case 'z': out = z[random(3)];  nolower = false; break;
        case 'A': out = A[random(16)]; break;
        case 'B': out = B[random(7)]; break;
        case 'C': out = C[random(7)]; break;
        case 'D': out = D[random(3)]; break;
        case 'E': out = E[random(18)]; break;
        case 'F': out = F[random(1)]; break;
        case 'G': out = G[random(4)]; break;
        case 'H': out = H[random(5)]; break;
        case 'I': out = I[random(12)]; break;
        case 'J': out = J[random(2)]; break;
        case 'K': out = K[random(4)]; break;
        case 'L': out = L[random(7)]; break;
        case 'M': out = M[random(2)]; break;
        case 'N': out = N[random(11)]; break;
        case 'O': out = O[random(18)]; break;
        case 'P': out = P[random(3)]; break;
        case 'Q': out = Q[random(1)]; break;
        case 'R': out = R[random(8)]; break;
        case 'S': out = S[random(5)]; break;
        case 'T': out = T[random(5)]; break;
        case 'U': out = U[random(12)]; break;
        case 'V': out = V[random(1)]; break;
        case 'W': out = W[random(5)]; break;
        case 'X': out = X[random(4)]; break;
        case 'Y': out = Y[random(8)]; break;
        case 'Z': out = Z[random(4)]; break;
        case '\n':out = std::wstring(L"\n") + L"[" + buf + L"]"; break;
        case '%': {
            for (; cnt < len; cnt++) {
                out += str[cnt];
                if (str[cnt] >= 'A' && str[cnt] <= 'z' && str[cnt]!='l') {
                    break;
                }
            }
            break;
        }
        case '<': {
            for (; cnt < len; cnt++) {
                out += str[cnt];
                if (str[cnt] == '>') {
                    break;
                }
            }
            break;
        }
        case '&': {
            for (; cnt < len; cnt++) {
                out += str[cnt];
                if (str[cnt] >= 'A' && str[cnt] <= 'z') {
                    break;
                }
            }
            break;
        }
        default: out = str[cnt]; break;
        }
        after += out;
    }
    if (nolower) {
        // supposingly a macro
        return str;
    }
    //wrap
    if (extend) {
        int lencnt = (int)floor(len * 3.0 / 10.0 + 0.5);
        for (int cnt = 1; cnt <= lencnt; cnt++) {
            if (cnt % 4 == 1) after += L" ";
            else after += L"!";
        }
    }
    buf = std::wstring(L"[") + buf + L"]";
    if (wraparound) after = std::wstring(L"[") + after + L"]";
    if (genid)after = buf + after;
    return after;
}
